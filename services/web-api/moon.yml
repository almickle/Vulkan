type: "application"
language: "typescript"

tasks:
  generate:
    command: "prisma generate; node scripts/post-generate.js"
    inputs:
      - "prisma/schema.prisma"
      - ".env"
    deps:
      - "validate"

  migrate:
    command: "prisma migrate dev"
    inputs:
      - "prisma/schema.prisma"
      - ".env"
    deps:
      - "validate"

  migrate-dev:
    command: "prisma migrate dev"
    options:
      interactive: true
    inputs:
      - "prisma/schema.prisma"
      - ".env"
    deps:
      - "validate"

  validate:
    command: "prisma validate"
    inputs:
      - "prisma/schema.prisma"

  bootstrap:
    extends: "build"
    deps:
      - "generate"
      - "migrate"
